# ===================================================================
# üèóÔ∏è CONFIGURACI√ìN DE SERVIDOR & APP
# ===================================================================
spring.application.name=auth-service
# Puerto por defecto (GCP suele inyectar la variable PORT, si no usa 8080)
server.port=${PORT:8080}

# ===================================================================
# üíæ BASE DE DATOS (PostgreSQL - Neon/Cloud SQL)
# ===================================================================
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# --- HIKARI CP (Connection Pooling - Vital para Prod) ---
# Tiempo m√°x de vida de una conexi√≥n (30 min)
spring.datasource.hikari.max-lifetime=1800000
# Tiempo de espera para obtener conexi√≥n
spring.datasource.hikari.connection-timeout=30000
# Tama√±o m√°ximo del pool (Ajustar seg√∫n la capacidad de tu BD en Neon/GCP)
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:10}
# M√≠nimo de conexiones ociosas listas
spring.datasource.hikari.minimum-idle=2

# ===================================================================
# üîÆ JPA & HIBERNATE
# ===================================================================
# En PROD usar "validate" o "none". "update" solo para DEV local.
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# ===================================================================
# üõ°Ô∏è SEGURIDAD & JWT
# ===================================================================
# Clave secreta para firmar tokens (Debe ser larga y compleja en Prod)
jwt.secret=${JWT_SECRET}
# Expiraci√≥n en milisegundos (ej. 86400000 = 24h)
jwt.expiration=${JWT_EXPIRATION:86400000}

# ===================================================================
# üìß NOTIFICACIONES (Secrets)
# ===================================================================
resend.api.key=${RESEND_API_KEY:}
twilio.account.sid=${TWILIO_SID:}
twilio.auth.token=${TWILIO_TOKEN:}
twilio.phone.number=${TWILIO_PHONE:}

# URL del Frontend para generar links en los correos
app.frontend.url=${FRONTEND_URL:http://localhost:3000}

# ===================================================================
# üíì HEALTH CHECKS (Actuator para GCP Cloud Run/K8s)
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# ==============================================================
# CONFIGURACI√ìN DE OBSERVABILIDAD (ACTUATOR & PROMETHEUS)
# ==============================================================
# Habilitar m√©tricas de JVM y Logback
management.metrics.tags.application=${spring.application.name}