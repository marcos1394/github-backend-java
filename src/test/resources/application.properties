# =============================================================================
# CONFIGURACIÃ“N DE BASE DE DATOS H2 (EN MODO COMPATIBILIDAD POSTGRESQL)
# =============================================================================

# 1. URL DE CONEXIÃ“N (LA CLAVE DE LA SOLUCIÃ“N ðŸª„)
# MODE=PostgreSQL: Habilita tipos como 'jsonb' y 'text' que usa tu cÃ³digo.
# DATABASE_TO_LOWER=TRUE: Evita que H2 sea estricto con mayÃºsculas/minÃºsculas (fix "Table not found").
# DEFAULT_NULL_ORDERING=HIGH: Simula cÃ³mo Postgres ordena los nulos.
spring.datasource.url=jdbc:h2:mem:testdb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH;INIT=CREATE DOMAIN IF NOT EXISTS "JSONB" AS TEXT \\; CREATE DOMAIN IF NOT EXISTS "GEOGRAPHY" AS GEOMETRY
# 2. DRIVER Y DIALECTO
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# IMPORTANTE: Usamos el dialecto de PostgreSQL (no H2) para que Hibernate
# genere SQL compatible con JSONB, aprovechando que H2 ahora estÃ¡ en modo Postgres.
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# 3. SETTINGS DE HIBERNATE
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
# Esto ayuda a ver si el SQL generado es correcto durante el test
spring.jpa.properties.hibernate.format_sql=true

# =============================================================================
# VALORES DUMMY (MOCKS) - PARA QUE SPRING BOOT NO EXPLOTE AL INICIAR
# =============================================================================
# Spring necesita encontrar valores para ${DB_URL}, ${JWT_SECRET}, etc.

# Variables de Base de Datos
DB_URL=jdbc:h2:mem:testdb;MODE=PostgreSQL
DB_USER=sa
DB_PASSWORD=dummy

# Variables de Seguridad y Terceros
# La clave JWT debe ser larga para cumplir con HS256 (32+ chars)
JWT_SECRET=clave_super_secreta_para_tests_unitarios_123456789012345
RESEND_API_KEY=re_123_test_key
TWILIO_SID=AC_test_sid
TWILIO_TOKEN=test_token

# Perfil activo
spring.profiles.active=test